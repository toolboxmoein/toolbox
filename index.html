<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>رادار اینستاگرام</title>
 
 <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
 
 <style>
 :root {
 --primary-color: #00D968;
 --primary-light: #E6F8EE; 
 --secondary-color: #00B84B;
 --dark-color: #333;
 --light-color: #f8f9fa; 
 --shadow: 0 10px 30px rgba(0, 217, 104, 0.1);
 --transition: all 0.3s ease;
 --gradient: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
 --card-shadow: 0 15px 35px rgba(0, 217, 104, 0.1), 0 5px 15px rgba(0, 0, 0, 0.07);
 --subtle-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
 --border-radius: 16px;
 --button-border-radius: 8px; 
 --border-color: #e0e0e0;
 --grey-color: #6c757d;
 --danger-color: #e74c3c;
 --text-color: #333333; 
 --text-light: #666666; 
 --bg-color: #f9f9f9; 
 --white: #ffffff; 
 }

 .payment-notification {
 position: fixed;
 top: -150px;
 left: 50%;
 transform: translateX(-50%);
 width: 90%;
 max-width: 450px;
 background-color: var(--white);
 border-radius: var(--border-radius);
 box-shadow: var(--card-shadow);
 display: flex;
 align-items: center;
 padding: 16px 20px;
 z-index: 10001;
 transition: top 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
 border-top: 4px solid;
 font-family: 'Vazirmatn', Arial, sans-serif;
 }

 .payment-notification.show {
 top: 20px;
 }

 .payment-notification.success { border-color: var(--primary-color); }
 .payment-notification.failed { border-color: var(--danger-color); }

 .payment-notification .notification-icon {
 font-size: 24px;
 margin-left: 15px;
 }
 .payment-notification.success .notification-icon { color: var(--primary-color); }
 .payment-notification.failed .notification-icon { color: var(--danger-color); }

 .notification-content strong {
 font-size: 16px;
 font-weight: 700;
 color: var(--dark-color);
 display: block;
 }
 .notification-content p {
 font-size: 14px;
 color: var(--grey-color);
 margin: 0;
 line-height: 1.5;
 }

 .notification-close {
 margin-right: auto;
 background: none;
 border: none;
 font-size: 24px;
 color: var(--grey-color);
 cursor: pointer;
 padding: 0 5px;
 }

 .no-session-container {
 display: flex;
 justify-content: center;
 align-items: center;
 height: 100vh;
 background-color: var(--white);
 position: fixed;
 top: 0;
 left: 0;
 width: 100%;
 z-index: 9999;
 }

 .no-session-content {
 background: #fff;
 padding: 40px;
 border-radius: 0;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 height: 100vh;
 text-align: center;
 display: flex;
 flex-direction: column;
 justify-content: center;
 align-items: center;
 }

 .no-session-content h2 {
 margin-bottom: 20px;
 color: var(--dark-color);
 }

 .no-session-content p {
 margin-bottom: 30px;
 color: var(--grey-color);
 line-height: 1.6;
 }

 .no-session-content button {
 width: 100%;
 max-width: 450px;
 padding: 14px;
 border: none;
 border-radius: var(--button-border-radius);
 font-size: 16px;
 cursor: pointer;
 font-family: 'Vazirmatn', Arial, sans-serif;
 margin-bottom: 10px;
 transition: var(--transition);
 }

 .login-button {
 background: var(--gradient);
 color: white;
 }

 .login-button:hover {
 box-shadow: var(--shadow);
 transform: translateY(-2px);
 }

 * {
 margin: 0;
 padding: 0; 
 box-sizing: border-box;
 }

 body {
 font-family: 'Vazirmatn', Arial, sans-serif;
 background-color: var(--light-color); 
 direction: rtl;
 text-align: right;
 color: var(--dark-color); 
 line-height: 1.6;
 position: relative;
 overflow-x: hidden;
 -webkit-user-select: none;
 -moz-user-select: none;
 -ms-user-select: none;
 user-select: none;
 }

 .header { 
 background-color: #ffffff;
 padding: 15px 0 15px 20px; 
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 display: flex;
 justify-content: space-between;
 align-items: center;
 position: sticky;
 top: 0;
 z-index: 1000; 
 }

 .menu-tab-button { 
 background-color: var(--primary-color);
 color: white;
 border: none;
 padding: 12px 25px 12px 20px;
 font-family: 'Vazirmatn', Arial, sans-serif;
 font-size: 16px;
 font-weight: 600;
 cursor: pointer;
 border-radius: 15px 0 0 15px; 
 transition: var(--transition);
 box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
 }

 .menu-tab-button:hover {
 background-color: var(--secondary-color);
 transform: translateX(5px); 
 }
 
 .logo-container { 
 flex: 1; 
 display: flex; 
 justify-content: center; 
 } 
 .logo-placeholder { 
 width: 240px; 
 height: 80px; 
 background-image: url('images/logo.png'); 
 background-size: contain;
 background-repeat: no-repeat;
 background-position: center;
 }
 
 .overlay {
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 bottom: 0;
 background-color: rgba(0, 0, 0, 0.5);
 z-index: 999;
 opacity: 0;
 visibility: hidden;
 transition: var(--transition);
 }

 .overlay.active {
 opacity: 1;
 visibility: visible;
 }

 .sidebar {
 position: fixed;
 top: 0;
 right: -100%;
 width: 75%;
 max-width: 360px;
 height: 100%;
 background-color: var(--white);
 box-shadow: -3px 0 15px rgba(0, 0, 0, 0.1);
 z-index: 1000;
 transition: right 0.3s ease-out;
 overflow-y: auto;
 padding: 20px;
 display: flex;
 flex-direction: column;
 }

 .sidebar.active {
 right: 0;
 }

 .sidebar-header {
 display: flex;
 align-items: center;
 padding-bottom: 20px;
 margin-bottom: 20px;
 border-bottom: 1px solid var(--border-color); 
 position: relative;
 justify-content: flex-start;
 min-height: 60px;
 }

 .sidebar-logo {
 position: absolute;
 left: 50%;
 transform: translateX(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 height: auto; 
 width: auto; 
 max-width: calc(100% - 80px);
 }

 .sidebar-logo-image {
 height: 60px;
 width: auto;
 }

 .sidebar-close {
 flex-shrink: 0;
 margin-left: auto;
 position: relative;
 z-index: 10;
 background: none;
 border: none;
 font-size: 24px;
 color: var(--grey-color);
 cursor: pointer;
 padding: 5px;
 }

 .user-profile {
 padding: 10px 20px;
 margin-bottom: 15px;
 background: var(--gradient);
 border-radius: var(--border-radius);
 color: var(--white);
 text-align: center;
 }

 .user-avatar {
 display: none;
 }

 .user-info h3 {
 margin-top: 0;
 margin-bottom: 0;
 font-size: 15px;
 font-weight: 600;
 }

 .user-info p {
 display: none;
 }

 .sidebar-menu {
 display: flex;
 flex-direction: column;
 gap: 10px;
 margin-bottom: 30px;
 }

 .sidebar-menu-item {
 display: flex;
 align-items: center;
 padding: 14px 16px;
 border-radius: var(--border-radius);
 text-decoration: none;
 color: var(--dark-color); 
 transition: var(--transition);
 cursor: pointer;
 }

 .sidebar-menu-item:hover {
 background-color: var(--primary-light);
 transform: translateX(-5px);
 }

 .sidebar-menu-item.logout {
 background-color: #ffebee;
 color: #c62828;
 border: 1px solid #ffcdd2;
 }

 .sidebar-menu-item.logout:hover {
 background-color: #ffcdd2;
 }

 .sidebar-menu-icon {
 width: 40px;
 height: 40px;
 background-color: var(--primary-light); 
 border-radius: 50%;
 display: flex;
 justify-content: center;
 align-items: center;
 margin-left: 15px;
 }

 .sidebar-menu-icon i {
 color: var(--primary-color);
 font-size: 18px;
 }

 .sidebar-menu-item.logout .sidebar-menu-icon i {
 color: #c62828;
 }

 .sidebar-menu-text {
 font-size: 15px;
 font-weight: 500;
 }

 .sidebar-footer {
 margin-top: auto;
 padding-top: 20px;
 border-top: 1px solid var(--border-color); 
 text-align: center;
 }

 .sidebar-version {
 font-size: 12px;
 color: var(--grey-color); 
 }

 .main-content { 
 padding: 20px; 
 }
 
 .separator-bar {
 width: 100%;
 height: 0.5cm;
 background: var(--gradient);
 margin-bottom: 20px;
 border-radius: var(--border-radius);
 box-shadow: var(--subtle-shadow);
 }
 
 .toolbar { 
 width: 100%; 
 height: 1.5cm; 
 background-color: #ffffff; 
 box-shadow: var(--card-shadow); 
 display: flex;
 align-items: center; 
 overflow-x: auto; 
 white-space: nowrap; 
 margin-bottom: 20px; 
 border-radius: var(--border-radius); 
 scroll-behavior: smooth; 
 } 
 .toolbar::-webkit-scrollbar { height: 6px; }
 .toolbar::-webkit-scrollbar-track { background: #f1f1f1; } 
 .toolbar::-webkit-scrollbar-thumb { background: var(--grey-color); border-radius: 3px; } 
 .toolbar::-webkit-scrollbar-thumb:hover { background: var(--dark-color); }
 
 .toolbar-item { 
 background: none; 
 border: none; 
 color: var(--dark-color); 
 padding: 18px 24px;
 cursor: pointer; 
 font-family: 'Vazirmatn', Arial, sans-serif; 
 font-size: 16px; 
 font-weight: 500; 
 transition: var(--transition);
 white-space: nowrap; 
 flex-shrink: 0; 
 position: relative; 
 }
 
 .toolbar-item:hover { 
 background-color: var(--primary-light); 
 color: var(--primary-color); 
 }
 
 .toolbar-item.active { 
 color: var(--primary-color); 
 background-color: var(--primary-light); 
 font-weight: 600; 
 }
 
 .toolbar-item:not(:last-child)::after { 
 content: ''; 
 position: absolute; 
 left: 0; 
 top: 25%; 
 height: 50%; 
 width: 1px; 
 background-color: var(--border-color); 
 } 
 .loaded-content { 
 width: 100%; 
 min-height: 300px; 
 }

 /* صفحه کاربری تمام صفحه */
 .user-profile-fullscreen {
 position: fixed;
 top: 0;
 left: 0;
 width: 100%;
 height: 100vh;
 background-color: var(--light-color);
 z-index: 10000;
 overflow-y: auto;
 padding: 40px 20px;
 display: none;
 }

 .user-profile-container {
 width: 100%;
 max-width: 700px;
 margin: 0 auto;
 text-align: center;
 }

 .user-profile-header {
 margin-bottom: 40px;
 }

 .user-profile-header h1 {
 font-size: 32px;
 font-weight: 800;
 color: var(--dark-color);
 margin-bottom: 10px;
 position: relative;
 display: inline-block;
 padding-bottom: 10px;
 }
 .user-profile-header h1::after {
 content: '';
 position: absolute;
 bottom: 0;
 right: 50%;
 transform: translateX(50%);
 width: 80px;
 height: 4px;
 background: var(--gradient);
 border-radius: 2px;
 }
 .user-profile-header h1 i {
 color: var(--primary-color);
 margin-left: 10px;
 }

 .back-button {
 position: fixed;
 top: 20px;
 left: 20px;
 background: var(--primary-color);
 color: white;
 border: none;
 padding: 12px 20px;
 border-radius: 25px;
 font-size: 14px;
 cursor: pointer;
 font-family: 'Vazirmatn', sans-serif;
 font-weight: 600;
 transition: var(--transition);
 box-shadow: 0 4px 15px rgba(0, 217, 104, 0.3);
 z-index: 10001;
 }

 .back-button:hover {
 background-color: var(--secondary-color);
 transform: translateY(-2px);
 box-shadow: 0 6px 20px rgba(0, 217, 104, 0.4);
 }

 .profile-card {
 background: var(--white);
 border-radius: var(--border-radius);
 box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08), 0 5px 15px rgba(0, 0, 0, 0.05);
 padding: 30px;
 margin-bottom: 30px;
 border-top: 5px solid var(--primary-color);
 }

 .profile-section {
 padding: 20px 0;
 border-bottom: 1px dashed var(--border-color);
 text-align: right;
 }
 .profile-section:last-of-type {
 border-bottom: none;
 padding-bottom: 0;
 }
 .profile-section:first-of-type {
 padding-top: 0;
 }

 .profile-section h2 {
 font-size: 20px;
 font-weight: 700;
 color: var(--dark-color);
 margin-bottom: 15px;
 display: flex;
 align-items: center;
 }
 .profile-section h2 i {
 color: var(--primary-color);
 margin-left: 10px;
 font-size: 22px;
 }

 .info-item {
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 10px 0;
 font-size: 16px;
 border-bottom: 1px solid var(--border-color);
 }
 .info-item:last-of-type {
 border-bottom: none;
 }

 .info-label {
 color: var(--grey-color);
 font-weight: 500;
 display: flex;
 align-items: center;
 }
 .info-label i {
 margin-left: 8px;
 color: var(--secondary-color);
 }

 .info-value {
 font-weight: 600;
 color: var(--dark-color);
 }

 .status-badge {
 display: inline-block;
 padding: 6px 12px;
 border-radius: 20px;
 font-size: 13px;
 font-weight: 600;
 color: white;
 margin-right: 8px;
 }
 .status-badge.active { background-color: #2ecc71; }
 .status-badge.trial { background-color: #f1c40f; color: var(--dark-color); }
 .status-badge.inactive { background-color: var(--danger-color); }

 .user-profile-logout-button {
 width: 100%;
 padding: 14px;
 background: var(--danger-color);
 color: white;
 border: none;
 border-radius: 8px;
 font-size: 16px;
 cursor: pointer;
 font-family: 'Vazirmatn', sans-serif;
 font-weight: 700;
 transition: var(--transition);
 margin-top: 20px;
 }
 .user-profile-logout-button:hover {
 background-color: #c0392b;
 transform: translateY(-2px);
 box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
 }

 .loading-spinner {
 display: flex;
 justify-content: center;
 align-items: center;
 height: 200px;
 }
 .loading-spinner svg {
 animation: spinner_zKoa 2s linear infinite;
 }
 .loading-spinner circle {
 stroke-linecap: round;
 animation: spinner_YpZS 1.5s ease-in-out infinite;
 }
 @keyframes spinner_zKoa { 100% { transform: rotate(360deg); } }
 @keyframes spinner_YpZS {
 0% { stroke-dasharray: 0 150; stroke-dashoffset: 0; }
 47.5% { stroke-dasharray: 42 150; stroke-dashoffset: -16; }
 95%, 100% { stroke-dasharray: 42 150; stroke-dashoffset: -59; }
 }

 .error-message {
 background-color: #f8d7da;
 color: #721c24;
 border: 1px solid #f5c6cb;
 padding: 15px;
 border-radius: var(--border-radius);
 margin-top: 20px;
 font-size: 15px;
 }
 
 @media (max-width: 768px) {
 .logo-placeholder { 
 width: 150px; 
 height: 60px; 
 }
 .separator-bar { 
 height: 0.3cm; 
 }
 .toolbar-item { 
 font-size: 14px;
 padding: 15px 18px;
 }
 .menu-tab-button {
 font-size: 14px;
 padding: 10px 20px 10px 15px;
 }
 .sidebar {
 width: 90%; 
 }
 .user-profile-header h1 { font-size: 28px; }
 .user-profile-header h1 i { font-size: 20px; }
 .profile-card { padding: 20px; }
 .profile-section h2 { font-size: 18px; }
 .profile-section h2 i { font-size: 20px; }
 .info-item { font-size: 15px; flex-direction: column; align-items: flex-end; }
 .info-label { width: 100%; margin-bottom: 5px; }
 .info-value { width: 100%; text-align: left; }
 .status-badge { margin-right: 0; margin-left: 8px; }
 .back-button { top: 10px; left: 10px; padding: 10px 16px; font-size: 13px; }
 }

 .header,
 .main-content {
 display: none; 
 }

 #payment-container {
 display: flex; 
 justify-content: center;
 align-items: center;
 height: 100vh;
 background-color: var(--light-color);
 position: fixed;
 top: 0;
 left: 0; 
 width: 100%;
 z-index: 9998; 
 }
 #payment-container > div {
 background: #fff;
 padding: 40px;
 border-radius: var(--border-radius);
 box-shadow: var(--card-shadow);
 width: 100%;
 max-width: 450px; 
 text-align: center;
 }
 #payment-container h2 {
 margin-bottom: 10px;
 color: var(--dark-color);
 }
 #payment-container p {
 margin-top: 10px;
 margin-bottom: 25px;
 color: var(--grey-color);
 font-size: 15px;
 }
 #payment-container button {
 width: 100%;
 padding: 14px; 
 border: none;
 border-radius: var(--button-border-radius);
 font-size: 16px;
 cursor: pointer;
 font-family: 'Vazirmatn', Arial, sans-serif;
 margin-bottom: 10px;
 transition: var(--transition); 
 }
 #payment-container #pay-now-button {
 background: var(--gradient);
 color: white;
 }
 #payment-container #pay-now-button:hover {
 box-shadow: var(--shadow); 
 transform: translateY(-2px);
 }
 #payment-container #logout-button-payment { 
 background: none;
 color: var(--grey-color);
 border: 1px solid var(--border-color);
 }
 #payment-container #logout-button-payment:hover {
 background-color: var(--primary-light);
 }
 #payment-container #payment-message {
 margin-top: 20px;
 color: red;
 font-size: 14px;
 }

 body.loading::after {
 content: '';
 position: fixed;
 top: 0;
 left: 0;
 width: 100%;
 height: 100%;
 background: rgba(255, 255, 255, 0.7) url('data:image/svg+xml;charset=UTF-8,%3csvg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"%3e%3cstyle%3e.spinner_V8m1%7btransform-origin:center;animation:spinner_zKoa 2s linear infinite%7d.spinner_V8m1 circle%7bstroke-linecap:round;animation:spinner_YpZS 1.5s ease-in-out infinite%7d@keyframes spinner_zKoa%7b100%25%7btransform:rotate(360deg)%7d%7d@keyframes spinner_YpZS%7b0%25%7bstroke-dasharray:0 150;stroke-dashoffset:0%7d47.5%25%7bstroke-dasharray:42 150;stroke-dashoffset:-16%7d95%25,100%25%7bstroke-dasharray:42 150;stroke-dashoffset:-59%7d%7d%3c/style%3e%3cg class="spinner_V8m1"%3e%3ccircle cx="20" cy="20" r="9.5" fill="none" stroke="%2300D968" stroke-width="3"%3e%3c/circle%3e%3c/g%3e%3c/svg%3e') center / 50px no-repeat;
 z-index: 10000;
 }
 body.loading {
 pointer-events: none;
 }

 .modal {
 display: none;
 position: fixed;
 z-index: 10002;
 left: 0;
 top: 0;
 width: 100%;
 height: 100%;
 overflow: auto;
 background-color: rgba(0,0,0,0.6);
 justify-content: center;
 align-items: center;
 font-family: 'Vazirmatn', Arial, sans-serif;
 }

 .modal.active {
 display: flex;
 }

 .modal-content {
 background-color: var(--white);
 margin: auto;
 padding: 30px;
 border-radius: var(--border-radius);
 box-shadow: var(--card-shadow);
 width: 90%;
 max-width: 450px;
 text-align: center;
 position: relative;
 animation: fadeIn 0.3s ease-out;
 }

 @keyframes fadeIn {
 from { opacity: 0; transform: translateY(-20px); }
 to { opacity: 1; transform: translateY(0); }
 }

 .modal-content h2 {
 margin-bottom: 15px;
 color: var(--dark-color);
 font-size: 24px;
 }

 .modal-content p {
 color: var(--grey-color);
 font-size: 16px;
 margin-bottom: 30px;
 }

 .modal-actions {
 display: flex;
 flex-direction: column;
 gap: 10px;
 margin-top: 20px;
 }

 .modal-actions button {
 width: 100%;
 padding: 14px;
 border: none;
 border-radius: var(--button-border-radius);
 font-size: 16px;
 cursor: pointer;
 font-family: 'Vazirmatn', Arial, sans-serif;
 transition: var(--transition);
 font-weight: 500;
 }

 .modal-actions .confirm-button {
 background: var(--gradient);
 color: white;
 }

 .modal-actions .confirm-button:hover {
 box-shadow: var(--shadow);
 transform: translateY(-2px);
 }

 .modal-actions .cancel-button {
 background: none;
 color: var(--grey-color);
 border: 1px solid var(--border-color);
 }

 .modal-actions .cancel-button:hover {
 background-color: var(--primary-light);
 }
 </style>
</head>
<body>

<!-- صفحه عدم ورود -->
<div id="no-session-container" class="no-session-container" style="display: none;">
 <div class="no-session-content">
 <i class="fas fa-sign-in-alt" style="font-size: 60px; color: var(--primary-color); margin-bottom: 20px;"></i>
 <h2>ورود به حساب کاربری</h2>
 <p>برای استفاده از رادار اینستاگرام، لطفاً ابتدا وارد حساب کاربری خود شوید یا حساب جدید ایجاد کنید.</p>
 <button class="login-button" onclick="goToRegister()">
 <i class="fas fa-user-plus"></i> ورود / ثبت‌نام
 </button>
 </div>
</div>

<!-- صفحه کاربری تمام صفحه -->
<div id="user-profile-fullscreen" class="user-profile-fullscreen">
 <button class="back-button" onclick="closeUserProfile()">
 <i class="fas fa-arrow-right"></i> بازگشت
 </button>
 
 <div class="user-profile-container">
 <header class="user-profile-header">
 <h1><i class="fas fa-user-circle"></i> صفحه کاربری</h1>
 </header>

 <div id="user-profile-loading" class="loading-spinner">
 <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
 <g class="spinner_zKoa">
 <circle cx="20" cy="20" r="9.5" fill="none" stroke="var(--primary-color)" stroke-width="3"></circle>
 </g>
 </svg>
 </div>

 <div id="user-profile-content-fullscreen" style="display: none;">
 <div class="profile-card">
 <div class="profile-section">
 <h2><i class="fas fa-id-card-alt"></i> اطلاعات شخصی</h2>
 <div class="info-item">
 <span class="info-label"><i class="fas fa-user"></i> نام کامل:</span>
 <span class="info-value" id="userNameFullscreen">در حال بارگذاری...</span>
 </div>
 <div class="info-item">
 <span class="info-label"><i class="fas fa-at"></i> ایمیل:</span>
 <span class="info-value" id="userEmailFullscreen">در حال بارگذاری...</span>
 </div>
 </div>

 <div class="profile-section">
 <h2><i class="fas fa-crown"></i> وضعیت اشتراک</h2>
 <div class="info-item">
 <span class="info-label"><i class="fas fa-check-circle"></i> وضعیت:</span>
 <span class="info-value" id="subscriptionStatusFullscreen">در حال بارگذاری...</span>
 </div>
 <div class="info-item">
 <span class="info-label"><i class="fas fa-box-open"></i> پلن خریداری شده:</span>
 <span class="info-value" id="subscriptionPlanFullscreen">در حال بارگذاری...</span>
 </div>
 <div class="info-item">
 <span class="info-label"><i class="fas fa-hourglass-half"></i> روزهای باقی‌مانده:</span>
 <span class="info-value" id="remainingDaysFullscreen">در حال بارگذاری...</span>
 </div>
 <div class="info-item">
 <span class="info-label"><i class="fas fa-calendar-alt"></i> تاریخ انقضا:</span>
 <span class="info-value" id="expiryDateFullscreen">در حال بارگذاری...</span>
 </div>
 </div>
 </div>

 <button id="user-profile-logout-button" class="user-profile-logout-button">
 <i class="fas fa-sign-out-alt"></i> خروج از حساب کاربری
 </button>
 </div>

 <div id="user-profile-error" class="error-message" style="display: none;">
 <i class="fas fa-exclamation-triangle"></i> خطا در بارگذاری اطلاعات کاربری. لطفاً دوباره تلاش کنید.
 </div>
 </div>
</div>

<div id="payment-notification" class="payment-notification">
 <i id="notification-icon" class="notification-icon fas"></i>
 <div class="notification-content">
 <strong id="notification-title"></strong>
 <p id="notification-message"></p>
 </div>
 <button id="notification-close" class="notification-close">&times;</button>
</div>

<div id="multiDeviceModal" class="modal">
 <div class="modal-content">
 <i class="fas fa-exclamation-triangle" style="font-size: 50px; color: var(--danger-color); margin-bottom: 20px;"></i>
 <h2>ورود از دستگاه دیگر</h2>
 <p id="multiDeviceMessage">شما در حال حاضر با ایمیل <strong id="conflictingEmailDisplay"></strong> در دستگاه دیگری وارد شده‌اید. آیا می‌خواهید از آن دستگاه خارج شده و در این دستگاه وارد شوید؟</p>
 <div class="modal-actions">
 <button id="confirmSwitchDevice" class="confirm-button">بله، وارد شوم</button>
 <button id="cancelSwitchDevice" class="cancel-button">خیر، لغو کنم</button>
 </div>
 </div>
</div>

<div id="payment-container" style="display: none;">
 <div>
 <i class="fas fa-exclamation-circle" style="font-size: 60px; color: var(--primary-color); margin-bottom: 20px;"></i>
 <h2>حساب شما فعال نیست</h2>
 <p>دوره آزمایشی شما به پایان رسیده یا حساب شما فعال نیست. لطفاً برای دسترسی کامل، اشتراک خود را فعال کنید.</p>
 <button id="pay-now-button">
 <i class="fas fa-credit-card"></i> فعال‌سازی حساب و پرداخت
 </button>
 
 <button id="logout-button-payment"> 
 <i class="fas fa-sign-out-alt"></i> خروج از حساب
 </button>

 <p id="payment-message"></p>
 </div>
</div>

<header class="header">
 <div class="hamburger-menu">
 <button class="menu-tab-button" id="hamburgerIcon">منو</button>
 </div>
 <div class="logo-container">
 <div class="logo-placeholder"></div> 
 </div>
 <div style="width: 44px; visibility: hidden;"></div> 
</header>

<div class="overlay" id="overlay"></div>

<div class="sidebar" id="sidebar">
 <div class="sidebar-header">
 <div class="sidebar-logo">
 <img src="images/logo.png" alt="لوگو" class="sidebar-logo-image">
 </div>
 <button class="sidebar-close" id="sidebarClose">
 <i class="fas fa-times"></i>
 </button>
 </div>

 <div class="user-profile" id="userProfile">
 <div class="user-avatar">
 <i class="fas fa-user"></i>
 </div>
 <div class="user-info">
 <h3 id="userName">در حال بارگذاری...</h3>
 <p id="userEmail">...</p>
 </div>
 </div>

 <div class="sidebar-menu">
 <a href="about-app.html" class="sidebar-menu-item">
 <div class="sidebar-menu-icon"><i class="fas fa-info-circle"></i></div>
 <div class="sidebar-menu-text">درباره برنامه</div>
 </a>
 
 <a href="amoozesh.html" class="sidebar-menu-item">
 <div class="sidebar-menu-icon"><i class="fas fa-video"></i></div>
 <div class="sidebar-menu-text">آموزش ویدئویی</div>
 </a>

 <a href="message.html" class="sidebar-menu-item">
 <div class="sidebar-menu-icon"><i class="fas fa-envelope"></i></div>
 <div class="sidebar-menu-text">پیام‌ها</div>
 </a>

 <div class="sidebar-menu-item" onclick="openUserProfile()">
 <div class="sidebar-menu-icon"><i class="fas fa-user-circle"></i></div>
 <div class="sidebar-menu-text">صفحه کاربری</div>
 </div>

 <a href="contact.html" class="sidebar-menu-item">
 <div class="sidebar-menu-icon"><i class="fas fa-headset"></i></div>
 <div class="sidebar-menu-text">راه‌های ارتباطی</div>
 </a>

 <a href="settings.html" class="sidebar-menu-item">
 <div class="sidebar-menu-icon"><i class="fas fa-cog"></i></div>
 <div class="sidebar-menu-text">تنظیمات</div>
 </a>

 <a href="admin.html" class="sidebar-menu-item">
 <div class="sidebar-menu-icon"><i class="fas fa-user-shield"></i></div>
 <div class="sidebar-menu-text">ادمین</div>
 </a>

 <div class="sidebar-menu-item logout" id="logoutButtonSidebar">
 <div class="sidebar-menu-icon">
 <i class="fas fa-sign-out-alt"></i>
 </div>
 <div class="sidebar-menu-text">خروج از حساب</div>
 </div>
 </div>

 <div class="sidebar-footer">
 <div class="sidebar-version">نسخه 1.0.0</div>
 </div>
</div>

<main class="main-content" id="mainContent">
 <div class="separator-bar"></div>
 <div class="toolbar"> 
 <button class="toolbar-item active" data-content="followers">فالوورها</button>
 <button class="toolbar-item" data-content="following">فالوینگ‌ها</button> 
 <button class="toolbar-item" data-content="direct-marketing">دایرکت مارکتینگ</button>
 <button class="toolbar-item" data-content="calendar">تقویم تولید محتوا</button>
 <button class="toolbar-item" data-content="engagement">تعامل</button>
 <button class="toolbar-item" data-content="checklist">چک لیست تولید محتوا</button>
 </div>
 <div class="loaded-content" id="loadedContent">
 <!-- محتوا اینجا بارگذاری می‌شود -->
 </div>
</main>

<script>
console.log("✅ index.html: Script loaded");

let currentUserEmail = null;
let currentDeviceId = null;
let conflictingLoginEmail = null;

// رفتن به صفحه register
function goToRegister() {
 window.location.href = 'register.html';
}

// تولید Device ID
function generateDeviceId() {
 let deviceId = localStorage.getItem('deviceId');
 if (!deviceId) {
 deviceId = 'device-' + Math.random().toString(36).substr(2, 9) + '-' + Date.now();
 localStorage.setItem('deviceId', deviceId);
 console.log("Generated new deviceId:", deviceId);
 } else {
 console.log("Using existing deviceId:", deviceId);
 }
 return deviceId;
}

// درخواست به Worker
async function makeWorkerRequest(endpoint, data = null, method = 'GET') {
 const url = `https://weathered-sun-e806.toolbox-moein.workers.dev${endpoint}`;
 
 const options = {
 method: method,
 headers: {
 'Content-Type': 'application/json',
 },
 };
 
 const sessionToken = localStorage.getItem('sessionToken');
 if (sessionToken) {
 options.headers['Authorization'] = `Bearer ${sessionToken}`;
 }
 
 if (data && method !== 'GET') {
 options.body = JSON.stringify(data);
 }
 
 console.log('Making request to:', url);
 
 try {
 const response = await fetch(url, options);
 const result = await response.json();
 
 console.log('Response status:', response.status);
 console.log('Response data:', result);
 
 return { 
 success: response.ok, 
 status: response.status,
 data: result 
 };
 } catch (error) {
 console.error('Request failed:', error);
 return { 
 success: false, 
 error: 'خطای شبکه رخ داد' 
 };
 }
}

// بررسی session
async function checkSession() {
 const sessionToken = localStorage.getItem('sessionToken');
 if (!sessionToken) {
 console.log("No sessionToken found - showing login page");
 return null;
 }
 
 console.log("SessionToken found, checking with server...");
 const result = await makeWorkerRequest('/getsession', null, 'POST');
 if (result.success && result.data && result.data.user) {
 console.log("Session is valid for user:", result.data.user.email);
 return result.data;
 } else {
 console.log("Invalid session, removing token");
 localStorage.removeItem('sessionToken');
 return null;
 }
}

// خروج
async function performLogout() {
 console.log("Performing logout...");
 
 try {
 await makeWorkerRequest('/signout', null, 'POST');
 } catch (error) {
 console.error("Logout error:", error);
 }
 
 localStorage.removeItem('sessionToken');
 localStorage.removeItem('deviceId');
 
 // نمایش صفحه ورود به جای هدایت
 showNoSessionPage();
}

// نمایش صفحه عدم ورود
function showNoSessionPage() {
 console.log("Showing no session page");
 
 // مخفی کردن همه چیز
 const header = document.querySelector('.header');
 const mainContent = document.getElementById('mainContent');
 const paymentContainer = document.getElementById('payment-container');
 const noSessionContainer = document.getElementById('no-session-container');
 const userProfileFullscreen = document.getElementById('user-profile-fullscreen');
 
 if (header) header.style.display = 'none';
 if (mainContent) mainContent.style.display = 'none';
 if (paymentContainer) paymentContainer.style.display = 'none';
 if (userProfileFullscreen) userProfileFullscreen.style.display = 'none';
 if (noSessionContainer) noSessionContainer.style.display = 'flex';
}

// باز کردن صفحه کاربری تمام صفحه
function openUserProfile() {
 console.log("Opening user profile fullscreen");
 
 const userProfileFullscreen = document.getElementById('user-profile-fullscreen');
 if (userProfileFullscreen) {
 userProfileFullscreen.style.display = 'block';
 loadUserProfileFullscreen();
 }
 
 closeMenu();
}

// بستن صفحه کاربری
function closeUserProfile() {
 console.log("Closing user profile fullscreen");
 
 const userProfileFullscreen = document.getElementById('user-profile-fullscreen');
 if (userProfileFullscreen) {
 userProfileFullscreen.style.display = 'none';
 }
}

// Helper function to get subscription details
function getSubscriptionInfo(user) {
 console.log("Processing subscription info for user:", user.email);
 
 let statusText = "نامشخص";
 let planName = "نامشخص";
 let remainingDaysText = "نامشخص";
 let expiryDateText = "نامشخص";
 let statusClass = "";

 const planMap = {
 'monthly': '۱ ماهه',
 'quarterly': '۳ ماهه',
 'semi-annually': '۶ ماهه',
 'yearly': 'یک ساله',
 'trial': 'آزمایشی'
 };

 // Determine plan name
 if (user.subscriptionPlan) {
 planName = planMap[user.subscriptionPlan] || user.subscriptionPlan;
 } else if (user.subscriptionStatus === 'trial') {
 planName = 'آزمایشی';
 }

 console.log("User subscription status:", user.subscriptionStatus);
 console.log("User subscription plan:", user.subscriptionPlan);
 console.log("User created at:", user.createdAt);

 // Determine status and remaining days
 if (user.subscriptionStatus === 'trial' && user.createdAt) {
 const creationDate = new Date(user.createdAt);
 const trialEndDate = new Date(creationDate.getTime() + 7 * 24 * 60 * 60 * 1000);
 const today = new Date();
 const diffTime = trialEndDate.getTime() - today.getTime();
 const daysLeft = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

 console.log("Trial days left:", daysLeft);

 if (daysLeft > 0) {
 statusText = "آزمایشی";
 statusClass = "trial";
 remainingDaysText = `${daysLeft} روز`;
 expiryDateText = trialEndDate.toLocaleDateString('fa-IR', { year: 'numeric', month: 'long', day: 'numeric' });
 } else {
 statusText = "پایان یافته";
 statusClass = "inactive";
 remainingDaysText = "پایان یافته";
 expiryDateText = trialEndDate.toLocaleDateString('fa-IR', { year: 'numeric', month: 'long', day: 'numeric' });
 }
 } else if (user.subscriptionStatus === 'active' && user.subscriptionEndDate) {
 const endDate = new Date(user.subscriptionEndDate);
 const today = new Date();
 const diffTime = endDate.getTime() - today.getTime();
 const daysLeft = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

 console.log("Active subscription days left:", daysLeft);

 if (daysLeft > 0) {
 statusText = "فعال";
 statusClass = "active";
 remainingDaysText = `${daysLeft} روز`;
 expiryDateText = endDate.toLocaleDateString('fa-IR', { year: 'numeric', month: 'long', day: 'numeric' });
 } else {
 statusText = "پایان یافته";
 statusClass = "inactive";
 remainingDaysText = "پایان یافته";
 expiryDateText = endDate.toLocaleDateString('fa-IR', { year: 'numeric', month: 'long', day: 'numeric' });
 }
 } else {
 // Default for 'inactive' or missing data
 statusText = "غیرفعال";
 statusClass = "inactive";
 remainingDaysText = "نامشخص";
 expiryDateText = "نامشخص";
 }

 console.log("Final subscription info:", {
 statusText, planName, remainingDaysText, expiryDateText, statusClass
 });

 return {
 statusText: `<span class="status-badge ${statusClass}">${statusText}</span>`,
 planName: planName,
 remainingDaysText: remainingDaysText,
 expiryDateText: expiryDateText
 };
}

// بارگذاری اطلاعات کاربر در صفحه تمام صفحه
async function loadUserProfileFullscreen() {
 console.log("Loading user profile fullscreen...");

 const loadingState = document.getElementById('user-profile-loading');
 const userProfileContent = document.getElementById('user-profile-content-fullscreen');
 const errorState = document.getElementById('user-profile-error');

 const userNameElem = document.getElementById('userNameFullscreen');
 const userEmailElem = document.getElementById('userEmailFullscreen');
 const subscriptionStatusElem = document.getElementById('subscriptionStatusFullscreen');
 const subscriptionPlanElem = document.getElementById('subscriptionPlanFullscreen');
 const remainingDaysElem = document.getElementById('remainingDaysFullscreen');
 const expiryDateElem = document.getElementById('expiryDateFullscreen');

 if (loadingState) loadingState.style.display = 'flex';
 if (userProfileContent) userProfileContent.style.display = 'none';
 if (errorState) errorState.style.display = 'none';

 try {
 const session = await checkSession();

 if (!session || !session.user) {
 console.log("No valid session found");
 if (loadingState) loadingState.style.display = 'none';
 if (errorState) errorState.style.display = 'block';
 return;
 }

 const user = session.user;
 const fullName = `${user.firstName || ''} ${user.lastName || ''}`.trim() || user.email;

 console.log("Displaying user info:", {
 fullName,
 email: user.email,
 subscriptionStatus: user.subscriptionStatus,
 subscriptionPlan: user.subscriptionPlan
 });

 if (userNameElem) userNameElem.textContent = fullName;
 if (userEmailElem) userEmailElem.textContent = user.email;

 const subInfo = getSubscriptionInfo(user);
 if (subscriptionStatusElem) subscriptionStatusElem.innerHTML = subInfo.statusText;
 if (subscriptionPlanElem) subscriptionPlanElem.textContent = subInfo.planName;
 if (remainingDaysElem) remainingDaysElem.textContent = subInfo.remainingDaysText;
 if (expiryDateElem) expiryDateElem.textContent = subInfo.expiryDateText;

 if (loadingState) loadingState.style.display = 'none';
 if (userProfileContent) userProfileContent.style.display = 'block';

 console.log("User profile fullscreen loaded successfully");

 } catch (error) {
 console.error("Error loading user profile fullscreen:", error);
 if (loadingState) loadingState.style.display = 'none';
 if (errorState) errorState.style.display = 'block';
 }
}

// بارگذاری پروفایل کاربر در sidebar
async function loadUserProfile() {
 console.log("Loading user profile...");
 
 const session = await checkSession();
 if (!session || !session.user) {
 document.getElementById('userName').textContent = 'مهمان';
 return;
 }

 const firstName = session.user.firstName || '';
 const lastName = session.user.lastName || '';
 const fullName = `${firstName} ${lastName}`.trim();

 document.getElementById('userName').textContent = fullName || session.user.email;
 console.log("User profile loaded:", fullName || session.user.email);
}

// مدیریت نتیجه پرداخت
function handlePaymentResult() {
 console.log("Handling payment result...");
 
 const notification = document.getElementById('payment-notification');
 const icon = document.getElementById('notification-icon');
 const title = document.getElementById('notification-title');
 const message = document.getElementById('notification-message');
 const closeBtn = document.getElementById('notification-close');

 let notificationTimeout;

 function showNotification(type, titleText, messageText) {
 console.log("Showing notification:", type, titleText);
 clearTimeout(notificationTimeout);

 notification.className = 'payment-notification';
 notification.classList.add(type);
 
 icon.className = `notification-icon fas ${type === 'success' ? 'fa-check-circle' : 'fa-times-circle'}`;
 title.textContent = titleText;
 message.textContent = messageText;

 notification.classList.add('show');

 notificationTimeout = setTimeout(() => {
 notification.classList.remove('show');
 }, 5000);
 }

 closeBtn.addEventListener('click', () => {
 clearTimeout(notificationTimeout);
 notification.classList.remove('show');
 });

 const urlParams = new URLSearchParams(window.location.search);
 const paymentStatus = urlParams.get('payment');

 if (paymentStatus) {
 console.log("Payment status found:", paymentStatus);
 if (paymentStatus === 'success') {
 showNotification('success', 'پرداخت موفق', 'اشتراک شما با موفقیت فعال گردید. به رادار خوش آمدید!');
 } else if (paymentStatus === 'failed') {
 showNotification('failed', 'پرداخت ناموفق', 'پرداخت لغو شد یا با خطا مواجه گردید. لطفاً دوباره تلاش کنید.');
 }
 history.replaceState(null, '', window.location.pathname);
 }
}

// بارگذاری محتوا
function loadContent(contentType) {
 console.log("Loading content:", contentType);
 
 const loadedContent = document.getElementById('loadedContent');
 let finalHTML = '';
 
 const pageFileMap = {
 'followers': 'follower-management.html',
 'following': 'following.html',
 'direct-marketing': 'direct-marketing.html',
 'calendar': 'content-calendar.html',
 'engagement': 'daily-engagement.html',
 'checklist': 'checklist-content.html',
 'payment': 'payment.html'
 };

 if (pageFileMap[contentType]) {
 let src = pageFileMap[contentType];
 const params = new URLSearchParams();
 if (currentUserEmail) {
 params.append('userEmail', encodeURIComponent(currentUserEmail));
 }
 if (currentDeviceId) {
 params.append('deviceId', encodeURIComponent(currentDeviceId));
 }
 if (params.toString()) {
 src += `?${params.toString()}`;
 }
 finalHTML = `<iframe src="${src}" style="width: 100%; height: 80vh; border: none; border-radius: var(--border-radius);"></iframe>`;
 } else {
 finalHTML = `<div style="width: 100%; min-height: 300px; background-color: #ffffff; border-radius: var(--border-radius); padding: 20px; box-shadow: var(--card-shadow); text-align:center;">
 <h3>محتوا</h3><p>این بخش در حال توسعه است...</p></div>`;
 }

 loadedContent.innerHTML = finalHTML;
}

// بررسی احراز هویت و نمایش محتوا
async function checkAuthStateAndDisplayContent() {
 console.log("Checking auth state...");
 
 handlePaymentResult();
 currentDeviceId = generateDeviceId();

 const header = document.querySelector('.header');
 const mainContent = document.getElementById('mainContent');
 const paymentContainer = document.getElementById('payment-container');
 const noSessionContainer = document.getElementById('no-session-container');
 const userProfileFullscreen = document.getElementById('user-profile-fullscreen');
 const toolbar = document.querySelector('.toolbar');

 // مخفی کردن همه چیز ابتدا
 if (header) header.style.display = 'none';
 if (mainContent) mainContent.style.display = 'none';
 if (paymentContainer) paymentContainer.style.display = 'none';
 if (noSessionContainer) noSessionContainer.style.display = 'none';
 if (userProfileFullscreen) userProfileFullscreen.style.display = 'none';

 // بررسی login conflict
 const urlParams = new URLSearchParams(window.location.search);
 const loginConflict = urlParams.get('loginConflict');
 const emailFromConflict = urlParams.get('email');

 if (loginConflict === 'true' && emailFromConflict) {
 console.log("Login conflict detected for:", emailFromConflict);
 conflictingLoginEmail = decodeURIComponent(emailFromConflict);
 document.getElementById('conflictingEmailDisplay').textContent = conflictingLoginEmail;
 document.getElementById('multiDeviceModal').classList.add('active');
 document.body.style.overflow = 'hidden';
 history.replaceState(null, '', window.location.pathname);
 return;
 }

 // بررسی session
 const session = await checkSession();
 
 if (!session || !session.user) {
 console.log("No valid session - showing login page");
 showNoSessionPage();
 return;
 }

 console.log("Valid session found for:", session.user.email);
 currentUserEmail = session.user.email;

 // بررسی دسترسی
 const FREE_ACCESS_EMAIL = "toolbox.moein@gmail.com";
 const isFreeAccessUser = session.user.email === FREE_ACCESS_EMAIL;
 const subscriptionStatus = session.user.subscriptionStatus;
 const userCreatedAt = session.user.createdAt;

 if (!userCreatedAt || !subscriptionStatus) {
 console.error("Missing user data");
 alert("خطا در دریافت اطلاعات کاربری. لطفاً دوباره تلاش کنید.");
 showNoSessionPage();
 return;
 }

 const isSubscriptionActive = subscriptionStatus === 'active';
 const sevenDaysLater = new Date(new Date(userCreatedAt).getTime() + 7 * 24 * 60 * 60 * 1000);
 const now = new Date();
 const isTrialPeriod = now <= sevenDaysLater;
 
 console.log("Access check - Subscription:", subscriptionStatus, "Trial:", isTrialPeriod, "Free user:", isFreeAccessUser);
 
 // نمایش interface
 if (header) header.style.display = 'flex'; 
 if (mainContent) mainContent.style.display = 'block';

 if (isFreeAccessUser || isSubscriptionActive || isTrialPeriod) {
 if (toolbar) toolbar.style.display = 'flex';
 console.log("Full access granted");
 loadContent('followers');
 } else {
 if (toolbar) toolbar.style.display = 'none';
 console.log("Limited access - showing payment");
 loadContent('payment');
 }
 
 await loadUserProfile();
}

// Menu functions
function openMenu() {
 const sidebar = document.getElementById('sidebar');
 const overlay = document.getElementById('overlay');
 
 if (sidebar && overlay) {
 sidebar.classList.add('active');
 overlay.classList.add('active');
 document.body.style.overflow = 'hidden';
 }
}

function closeMenu() {
 const sidebar = document.getElementById('sidebar');
 const overlay = document.getElementById('overlay');
 
 if (sidebar && overlay) {
 sidebar.classList.remove('active');
 overlay.classList.remove('active');
 document.body.style.overflow = '';
 }
}

// Event Listeners
document.addEventListener('DOMContentLoaded', function() {
 console.log("✅ DOM loaded");
 
 checkAuthStateAndDisplayContent();
 
 // Menu controls
 const hamburgerIcon = document.getElementById('hamburgerIcon');
 const sidebarClose = document.getElementById('sidebarClose');
 const overlay = document.getElementById('overlay');
 
 if (hamburgerIcon) {
 hamburgerIcon.addEventListener('click', function(e) {
 e.preventDefault();
 openMenu();
 });
 }
 
 if (sidebarClose) {
 sidebarClose.addEventListener('click', closeMenu);
 }
 
 if (overlay) {
 overlay.addEventListener('click', closeMenu);
 }
 
 document.addEventListener('keydown', function(e) {
 if (e.key === 'Escape') {
 closeMenu();
 const userProfileFullscreen = document.getElementById('user-profile-fullscreen');
 if (userProfileFullscreen && userProfileFullscreen.style.display === 'block') {
 closeUserProfile();
 }
 }
 });
 
 // Logout buttons
 const logoutButtonSidebar = document.getElementById('logoutButtonSidebar');
 const paymentLogoutButton = document.getElementById('logout-button-payment');
 const userProfileLogoutButton = document.getElementById('user-profile-logout-button');
 
 if (logoutButtonSidebar) {
 logoutButtonSidebar.addEventListener('click', function(e) {
 e.preventDefault();
 performLogout();
 });
 }
 
 if (paymentLogoutButton) {
 paymentLogoutButton.addEventListener('click', function(e) {
 e.preventDefault();
 performLogout();
 });
 }

 if (userProfileLogoutButton) {
 userProfileLogoutButton.addEventListener('click', function(e) {
 e.preventDefault();
 performLogout();
 });
 }
 
 // Toolbar items
 const toolbarItems = document.querySelectorAll('.toolbar-item');
 toolbarItems.forEach(item => {
 item.addEventListener('click', function() {
 console.log("Toolbar item clicked:", this.dataset.content);
 toolbarItems.forEach(btn => btn.classList.remove('active'));
 this.classList.add('active');
 
 loadContent(this.dataset.content);
 });
 });
 
 // Modal controls
 const confirmSwitchDeviceBtn = document.getElementById('confirmSwitchDevice');
 const cancelSwitchDeviceBtn = document.getElementById('cancelSwitchDevice');
 
 if (confirmSwitchDeviceBtn) {
 confirmSwitchDeviceBtn.addEventListener('click', function() {
 alert('این قابلیت در حال توسعه است');
 });
 }
 
 if (cancelSwitchDeviceBtn) {
 cancelSwitchDeviceBtn.addEventListener('click', function() {
 document.getElementById('multiDeviceModal').classList.remove('active');
 document.body.style.overflow = '';
 goToRegister();
 });
 }
});

console.log("✅ index.html: All event listeners attached");
</script>

</body>
</html>